(this["webpackJsonpavro-builder"]=this["webpackJsonpavro-builder"]||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(13)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(5),u=n.n(l),d=n(2),c=n(1),i=n(3),o=function(e,t){var n={id:t.id||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),parentId:t.parentId||null,type:e,name:t.name||"name",nullable:void 0===t.nullable||t.nullable};switch(e){case"record":return Object(c.a)({},n,{recordName:n.name,default:"{}"});default:return n}},p=function(e,t,n,a){var r=e[t],l=Object(c.a)({},r,Object(i.a)({},n,a));return Object(c.a)({},e,Object(i.a)({},t,l))},f=function(e,t){var n=o(t.type,t);return Object(c.a)({},e,Object(i.a)({},n.id,n))},m=function(e,t){var n=t.fieldId,a=t.type,r=e[n],l=o(a,r),u=e;return"record"===r.type&&"record"!==l.type&&(u=function e(t,n){var a=Object(c.a)({},t);return Object.values(t).filter((function(e){return e.parentId===n})).forEach((function(t){delete a[t.id],"record"===t.type&&(a=e(a,t.id))})),delete a[n],a}(e,n)),Object(c.a)({},u,Object(i.a)({},n,l))},y=function(e,t){switch(t.type){case"add_field":return f(e,t.payload);case"change_default_value":return function(e,t){var n=t.fieldId,a=t.defaultValue;return p(e,n,"default",a)}(e,t.payload);case"change_name":return function(e,t){var n=t.fieldId,a=t.name;return p(e,n,"name",a)}(e,t.payload);case"change_nullable":return function(e,t){var n=t.fieldId;return p(e,n,"nullable",!e[n].nullable)}(e,t.payload);case"change_type":return m(e,t.payload);case"remove_field":return function(e,t){var n=t.fieldId,a=Object(c.a)({},e);return delete a[n],a}(e,t.payload);default:return e}},s={},b=o("record",{name:"event_name"});s=f(s,b),s=f(s,{parentId:b.id,name:"event_name",type:"string",nullable:!1}),s=f(s,{parentId:b.id,name:"trace_id",type:"string",nullable:!1}),s=f(s,{parentId:b.id,name:"timestamp",type:"string",nullable:!1}),s=f(s,{parentId:b.id,name:"organization_id",type:"string",nullable:!1});var v=o("record",{parentId:b.id,name:"payload",default:"{}",type:"record",recordName:"payload",nullable:!1});s=f(s,v),s=f(s,{parentId:v.id,name:"body",type:"string"});var x=Object(a.createContext)(),g=function(){return Object(a.useContext)(x)},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object.values(e).filter((function(e){return e.parentId===t}))},h=function(e,t){return I(e,t).map((function(t){return function(e,t){var n=Object(c.a)({},t),a=n.parentId;switch(n.type){case"record":if(n.fields=h(e,n.id),!a){delete n.default,delete n.recordName;break}n.default=JSON.parse(n.default),n.type={type:"record",name:n.recordName,fields:n.fields},delete n.recordName,delete n.fields}return n.nullable&&a&&(n.type=["null",n.type],n.default=null),delete n.id,delete n.parentId,delete n.nullable,n}(e,t)}))},E=function(e){e.parentId;var t=g(),n=function(e){return h(e)[0]}(Object(d.a)(t,1)[0]),a=JSON.stringify(n,void 0,2),l="data:text/plain;charset=utf-8,"+encodeURIComponent(a);return r.a.createElement("a",{download:"schema.avsc",href:l},"Export")},O=function(e){var t=e.id,n=e.parentId,a=e.nullable,l=e.default,u=g(),c=Object(d.a)(u,2)[1],i=r.a.createElement(r.a.Fragment,null,', "default": ',r.a.createElement("input",{type:"text",value:l,onChange:function(e){return function(e,t,n){return e({type:"change_default_value",payload:{fieldId:t,defaultValue:n}})}(c,t,e.target.value)}}));return r.a.createElement(r.a.Fragment,null,n&&!a?i:null,', "fields": [',r.a.createElement(k,{parentId:t}),"]")},j=["boolean","int","long","float","double","bytes","string","record","enum","array","map"],_=function(e){var t=g(),n=Object(d.a)(t,2)[1],a=e.name,l=e.nullable,u=e.type,c=null;switch(u){case"record":c=O}return r.a.createElement("li",null,e.parentId?r.a.createElement("span",{className:"remove",onClick:function(){return function(e,t){return e({type:"remove_field",payload:{fieldId:t}})}(n,e.id)}},"x\xa0"):null,'{ "name": ',r.a.createElement("input",{type:"text",value:a,onChange:function(t){return function(e,t,n){return e({type:"change_name",payload:{fieldId:t,name:n}})}(n,e.id,t.target.value)}}),', "type":',r.a.createElement("select",{value:u,onChange:function(t){return function(e,t,n){return e({type:"change_type",payload:{fieldId:t,type:n}})}(n,e.id,t.target.value)}},j.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),e.parentId?r.a.createElement(r.a.Fragment,null,', "nullable": ',r.a.createElement("input",{type:"checkbox",checked:l,onChange:function(t){return function(e,t){return e({type:"change_nullable",payload:{fieldId:t}})}(n,e.id)}})):null,c?r.a.createElement(c,e):null,"}")},k=function(e){var t=e.parentId,n=g(),a=Object(d.a)(n,2),l=a[0],u=a[1],c=I(l,t);return r.a.createElement("ul",null,c.map((function(e){return r.a.createElement(_,Object.assign({},e,{key:e.id}))})),t?r.a.createElement("li",{className:"add",onClick:function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"string";return e({type:"add_field",payload:{parentId:t,type:n}})}(u,t)}},"+ add"):null)},C=(n(11),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E,null),r.a.createElement(k,null))});n(12);u.a.render(r.a.createElement((function(e){var t=e.children,n=Object(a.useReducer)(y,s);return r.a.createElement(x.Provider,{value:n},t)}),null,r.a.createElement(C,null)),document.getElementById("root"))}],[[6,1,2]]]);
//# sourceMappingURL=main.7489479b.chunk.js.map